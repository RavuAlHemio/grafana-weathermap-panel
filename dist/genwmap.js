!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){function r(e){this.options=e||{locator:{}}}function i(){this.cdata=!1}function o(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function a(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function s(e,t,n){return"string"==typeof e?e.substr(t,n):e.length>=t+n||t?new java.lang.String(e,t,n)+"":e}function u(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}r.prototype.parseFromString=function(e,t){var n=this.options,r=new l,o=n.domBuilder||new i,s=n.errorHandler,u=n.locator,c=n.xmlns||{},f={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return u&&o.setDocumentLocator(u),r.errorHandler=function(e,t,n){if(!e){if(t instanceof i)return t;e=t}var r={},o=e instanceof Function;function s(t){var i=e[t];!i&&o&&(i=2==e.length?function(n){e(t,n)}:e),r[t]=i&&function(e){i("[xmldom "+t+"]\t"+e+a(n))}||function(){}}return n=n||{},s("warning"),s("error"),s("fatalError"),r}(s,o,u),r.domBuilder=n.domBuilder||o,/\/x?html?$/.test(t)&&(f.nbsp=" ",f.copy="©",c[""]="http://www.w3.org/1999/xhtml"),c.xml=c.xml||"http://www.w3.org/XML/1998/namespace",e?r.parse(e,c,f):r.errorHandler.error("invalid doc source"),o.doc},i.prototype={startDocument:function(){this.doc=(new c).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,n,r){var i=this.doc,a=i.createElementNS(e,n||t),s=r.length;u(this,a),this.currentElement=a,this.locator&&o(this.locator,a);for(var l=0;l<s;l++){e=r.getURI(l);var c=r.getValue(l),f=(n=r.getQName(l),i.createAttributeNS(e,n));this.locator&&o(r.getLocator(l),f),f.value=f.nodeValue=c,a.setAttributeNode(f)}},endElement:function(e,t,n){var r=this.currentElement;r.tagName,this.currentElement=r.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var n=this.doc.createProcessingInstruction(e,t);this.locator&&o(this.locator,n),u(this,n)},ignorableWhitespace:function(e,t,n){},characters:function(e,t,n){if(e=s.apply(this,arguments)){if(this.cdata)var r=this.doc.createCDATASection(e);else r=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(r):/^\s*$/.test(e)&&this.doc.appendChild(r),this.locator&&o(this.locator,r)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,n){e=s.apply(this,arguments);var r=this.doc.createComment(e);this.locator&&o(this.locator,r),u(this,r)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,n){var r=this.doc.implementation;if(r&&r.createDocumentType){var i=r.createDocumentType(e,t,n);this.locator&&o(this.locator,i),u(this,i)}},warning:function(e){console.warn("[xmldom warning]\t"+e,a(this.locator))},error:function(e){console.error("[xmldom error]\t"+e,a(this.locator))},fatalError:function(e){throw console.error("[xmldom fatalError]\t"+e,a(this.locator)),e}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,(function(e){i.prototype[e]=function(){return null}}));var l=n(5).XMLReader,c=t.DOMImplementation=n(3).DOMImplementation;t.XMLSerializer=n(3).XMLSerializer,t.DOMParser=r},function(e,t){e.exports=require("http")},function(e,t){e.exports=require("fs")},function(e,t){function n(e,t){for(var n in e)t[n]=e[n]}function r(e,t){var r=e.prototype;if(Object.create){var i=Object.create(t.prototype);r.__proto__=i}if(!(r instanceof t)){function o(){}o.prototype=t.prototype,n(r,o=new o),e.prototype=r=o}r.constructor!=e&&("function"!=typeof e&&console.error("unknow Class:"+e),r.constructor=e)}var i="http://www.w3.org/1999/xhtml",o={},a=o.ELEMENT_NODE=1,s=o.ATTRIBUTE_NODE=2,u=o.TEXT_NODE=3,l=o.CDATA_SECTION_NODE=4,c=o.ENTITY_REFERENCE_NODE=5,f=o.ENTITY_NODE=6,p=o.PROCESSING_INSTRUCTION_NODE=7,h=o.COMMENT_NODE=8,d=o.DOCUMENT_NODE=9,m=o.DOCUMENT_TYPE_NODE=10,g=o.DOCUMENT_FRAGMENT_NODE=11,v=o.NOTATION_NODE=12,b={},y={},N=(b.INDEX_SIZE_ERR=(y[1]="Index size error",1),b.DOMSTRING_SIZE_ERR=(y[2]="DOMString size error",2),b.HIERARCHY_REQUEST_ERR=(y[3]="Hierarchy request error",3)),w=(b.WRONG_DOCUMENT_ERR=(y[4]="Wrong document",4),b.INVALID_CHARACTER_ERR=(y[5]="Invalid character",5),b.NO_DATA_ALLOWED_ERR=(y[6]="No data allowed",6),b.NO_MODIFICATION_ALLOWED_ERR=(y[7]="No modification allowed",7),b.NOT_FOUND_ERR=(y[8]="Not found",8)),x=(b.NOT_SUPPORTED_ERR=(y[9]="Not supported",9),b.INUSE_ATTRIBUTE_ERR=(y[10]="Attribute in use",10));function E(e,t){if(t instanceof Error)var n=t;else n=this,Error.call(this,y[e]),this.message=y[e],Error.captureStackTrace&&Error.captureStackTrace(this,E);return n.code=e,t&&(this.message=this.message+": "+t),n}function C(){}function D(e,t){this._node=e,this._refresh=t,S(this)}function S(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var r=e._refresh(e._node);ne(e,"length",r.length),n(r,e),e._inc=t}}function A(){}function T(e,t){for(var n=e.length;n--;)if(e[n]===t)return n}function k(e,t,n,r){if(r?t[T(t,r)]=n:t[t.length++]=n,e){var i=(n.ownerElement=e).ownerDocument;i&&(r&&L(i,e,r),function(e,t,n){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&(t._nsMap[n.prefix?n.localName:""]=n.value)}(i,e,n))}}function I(e,t,n){var r=T(t,n);if(!(0<=r))throw E(w,new Error(e.tagName+"@"+n));for(var i=t.length-1;r<i;)t[r]=t[++r];if(t.length=i,e){var o=e.ownerDocument;o&&(L(o,e,n),n.ownerElement=null)}}function _(e){if(this._features={},e)for(var t in e)this._features=e[t]}function O(){}function R(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function M(e,t){if(t(e))return!0;if(e=e.firstChild)do{if(M(e,t))return!0}while(e=e.nextSibling)}function F(){}function L(e,t,n){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&delete t._nsMap[n.prefix?n.localName:""]}function U(e,t,n){if(e&&e._inc){e._inc++;var r=t.childNodes;if(n)r[r.length++]=n;else{for(var i=t.firstChild,o=0;i;)i=(r[o++]=i).nextSibling;r.length=o}}}function P(e,t){var n=t.previousSibling,r=t.nextSibling;return n?n.nextSibling=r:e.firstChild=r,r?r.previousSibling=n:e.lastChild=n,U(e.ownerDocument,e),t}function G(e,t,n){var r=t.parentNode;if(r&&r.removeChild(t),t.nodeType===g){var i=t.firstChild;if(null==i)return t;var o=t.lastChild}else i=o=t;var a=n?n.previousSibling:e.lastChild;for(i.previousSibling=a,o.nextSibling=n,a?a.nextSibling=i:e.firstChild=i,null==n?e.lastChild=o:n.previousSibling=o;i.parentNode=e,i!==o&&(i=i.nextSibling););return U(e.ownerDocument||e,e),t.nodeType==g&&(t.firstChild=t.lastChild=null),t}function B(){this._nsMap={}}function V(){}function $(){}function j(){}function q(){}function z(){}function X(){}function W(){}function H(){}function Y(){}function Q(){}function Z(){}function J(){}function K(e,t){var n=[],r=9==this.nodeType?this.documentElement:this,i=r.prefix,o=r.namespaceURI;if(o&&null==i&&null==(i=r.lookupPrefix(o)))var a=[{namespace:o,prefix:null}];return te(this,n,e,t,a),n.join("")}function ee(e,t,n){var r=e.prefix||"",i=e.namespaceURI;if(!r&&!i)return!1;if("xml"===r&&"http://www.w3.org/XML/1998/namespace"===i||"http://www.w3.org/2000/xmlns/"==i)return!1;for(var o=n.length;o--;){var a=n[o];if(a.prefix==r)return a.namespace!=i}return!0}function te(e,t,n,r,o){if(r){if(!(e=r(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case a:o=o||[];var f=e.attributes,v=f.length,b=e.firstChild,y=e.tagName;n=i===e.namespaceURI||n,t.push("<",y);for(var N=0;N<v;N++)"xmlns"==(w=f.item(N)).prefix?o.push({prefix:w.localName,namespace:w.value}):"xmlns"==w.nodeName&&o.push({prefix:"",namespace:w.value});for(N=0;N<v;N++){var w;if(ee(w=f.item(N),0,o)){var x=w.prefix||"",E=w.namespaceURI,C=x?" xmlns:"+x:" xmlns";t.push(C,'="',E,'"'),o.push({prefix:x,namespace:E})}te(w,t,n,r,o)}if(ee(e,0,o)&&(x=e.prefix||"",E=e.namespaceURI,C=x?" xmlns:"+x:" xmlns",t.push(C,'="',E,'"'),o.push({prefix:x,namespace:E})),b||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(y)){if(t.push(">"),n&&/^script$/i.test(y))for(;b;)b.data?t.push(b.data):te(b,t,n,r,o),b=b.nextSibling;else for(;b;)te(b,t,n,r,o),b=b.nextSibling;t.push("</",y,">")}else t.push("/>");return;case d:case g:for(b=e.firstChild;b;)te(b,t,n,r,o),b=b.nextSibling;return;case s:return t.push(" ",e.name,'="',e.value.replace(/[<&"]/g,R),'"');case u:return t.push(e.data.replace(/[<&]/g,R));case l:return t.push("<![CDATA[",e.data,"]]>");case h:return t.push("\x3c!--",e.data,"--\x3e");case m:var D=e.publicId,S=e.systemId;if(t.push("<!DOCTYPE ",e.name),D)t.push(' PUBLIC "',D),S&&"."!=S&&t.push('" "',S),t.push('">');else if(S&&"."!=S)t.push(' SYSTEM "',S,'">');else{var A=e.internalSubset;A&&t.push(" [",A,"]"),t.push(">")}return;case p:return t.push("<?",e.target," ",e.data,"?>");case c:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function ne(e,t,n){e[t]=n}b.INVALID_STATE_ERR=(y[11]="Invalid state",11),b.SYNTAX_ERR=(y[12]="Syntax error",12),b.INVALID_MODIFICATION_ERR=(y[13]="Invalid modification",13),b.NAMESPACE_ERR=(y[14]="Invalid namespace",14),b.INVALID_ACCESS_ERR=(y[15]="Invalid access",15),E.prototype=Error.prototype,n(b,E),C.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var n=[],r=0;r<this.length;r++)te(this[r],n,e,t);return n.join("")}},D.prototype.item=function(e){return S(this),this[e]},r(D,C),A.prototype={length:0,item:C.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var n=this[t];if(n.nodeName==e)return n}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new E(x);var n=this.getNamedItem(e.nodeName);return k(this._ownerElement,this,e,n),n},setNamedItemNS:function(e){var t,n=e.ownerElement;if(n&&n!=this._ownerElement)throw new E(x);return t=this.getNamedItemNS(e.namespaceURI,e.localName),k(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return I(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var n=this.getNamedItemNS(e,t);return I(this._ownerElement,this,n),n},getNamedItemNS:function(e,t){for(var n=this.length;n--;){var r=this[n];if(r.localName==t&&r.namespaceURI==e)return r}return null}},_.prototype={hasFeature:function(e,t){var n=this._features[e.toLowerCase()];return!(!n||t&&!(t in n))},createDocument:function(e,t,n){var r=new F;if(r.implementation=this,r.childNodes=new C,(r.doctype=n)&&r.appendChild(n),t){var i=r.createElementNS(e,t);r.appendChild(i)}return r},createDocumentType:function(e,t,n){var r=new X;return r.name=e,r.nodeName=e,r.publicId=t,r.systemId=n,r}},O.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return G(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild:function(e){return P(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return function e(t,n,r){var i=new n.constructor;for(var o in n){var u=n[o];"object"!=typeof u&&u!=i[o]&&(i[o]=u)}switch(n.childNodes&&(i.childNodes=new C),i.ownerDocument=t,i.nodeType){case a:var l=n.attributes,c=i.attributes=new A,f=l.length;c._ownerElement=i;for(var p=0;p<f;p++)i.setAttributeNode(e(t,l.item(p),!0));break;case s:r=!0}if(r)for(var h=n.firstChild;h;)i.appendChild(e(t,h,r)),h=h.nextSibling;return i}(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==u&&e.nodeType==u?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return 0<this.attributes.length},lookupPrefix:function(e){for(var t=this;t;){var n=t._nsMap;if(n)for(var r in n)if(n[r]==e)return r;t=t.nodeType==s?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var n=t._nsMap;if(n&&e in n)return n[e];t=t.nodeType==s?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)}},n(o,O),n(o,O.prototype),F.prototype={nodeName:"#document",nodeType:d,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType!=g)return null==this.documentElement&&e.nodeType==a&&(this.documentElement=e),G(this,e,t),e.ownerDocument=this,e;for(var n=e.firstChild;n;){var r=n.nextSibling;this.insertBefore(n,t),n=r}return e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),P(this,e)},importNode:function(e,t){return function e(t,n,r){var i;switch(n.nodeType){case a:(i=n.cloneNode(!1)).ownerDocument=t;case g:break;case s:r=!0}if((i=i||n.cloneNode(!1)).ownerDocument=t,i.parentNode=null,r)for(var o=n.firstChild;o;)i.appendChild(e(t,o,r)),o=o.nextSibling;return i}(this,e,t)},getElementById:function(e){var t=null;return M(this.documentElement,(function(n){if(n.nodeType==a&&n.getAttribute("id")==e)return t=n,!0})),t},createElement:function(e){var t=new B;return t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.childNodes=new C,(t.attributes=new A)._ownerElement=t},createDocumentFragment:function(){var e=new Q;return e.ownerDocument=this,e.childNodes=new C,e},createTextNode:function(e){var t=new j;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new q;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new z;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var n=new Z;return n.ownerDocument=this,n.tagName=n.target=e,n.nodeValue=n.data=t,n},createAttribute:function(e){var t=new V;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new Y;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var n=new B,r=t.split(":"),i=n.attributes=new A;return n.childNodes=new C,n.ownerDocument=this,n.nodeName=t,n.tagName=t,n.namespaceURI=e,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=t,i._ownerElement=n},createAttributeNS:function(e,t){var n=new V,r=t.split(":");return n.ownerDocument=this,n.nodeName=t,n.name=t,n.namespaceURI=e,n.specified=!0,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=t,n}},r(F,O),F.prototype.getElementsByTagName=(B.prototype={nodeType:a,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var n=this.ownerDocument.createAttribute(e);n.value=n.nodeValue=""+t,this.setAttributeNode(n)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===g?this.insertBefore(e,null):function(e,t){var n=t.parentNode;if(n){var r=e.lastChild;n.removeChild(t),r=e.lastChild}return r=e.lastChild,t.parentNode=e,t.previousSibling=r,t.nextSibling=null,r?r.nextSibling=t:e.firstChild=t,e.lastChild=t,U(e.ownerDocument,e,t),t}(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);n&&this.removeAttributeNode(n)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);return n&&n.value||""},setAttributeNS:function(e,t,n){var r=this.ownerDocument.createAttributeNS(e,t);r.value=r.nodeValue=""+n,this.setAttributeNode(r)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new D(this,(function(t){var n=[];return M(t,(function(r){r===t||r.nodeType!=a||"*"!==e&&r.tagName!=e||n.push(r)})),n}))},getElementsByTagNameNS:function(e,t){return new D(this,(function(n){var r=[];return M(n,(function(i){i===n||i.nodeType!==a||"*"!==e&&i.namespaceURI!==e||"*"!==t&&i.localName!=t||r.push(i)})),r}))}}).getElementsByTagName,F.prototype.getElementsByTagNameNS=B.prototype.getElementsByTagNameNS,r(B,O),V.prototype.nodeType=s,r(V,O),$.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(y[N])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,n){n=this.data.substring(0,e)+n+this.data.substring(e+t),this.nodeValue=this.data=n,this.length=n.length}},r($,O),j.prototype={nodeName:"#text",nodeType:u,splitText:function(e){var t=this.data,n=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var r=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(r,this.nextSibling),r}},r(j,$),q.prototype={nodeName:"#comment",nodeType:h},r(q,$),z.prototype={nodeName:"#cdata-section",nodeType:l},r(z,$),X.prototype.nodeType=m,r(X,O),W.prototype.nodeType=v,r(W,O),H.prototype.nodeType=f,r(H,O),Y.prototype.nodeType=c,r(Y,O),Q.prototype.nodeName="#document-fragment",Q.prototype.nodeType=g,r(Q,O),Z.prototype.nodeType=p,r(Z,O),J.prototype.serializeToString=function(e,t,n){return K.call(e,t,n)},O.prototype.toString=K;try{Object.defineProperty&&(Object.defineProperty(D.prototype,"length",{get:function(){return S(this),this.$$length}}),Object.defineProperty(O.prototype,"textContent",{get:function(){return function e(t){switch(t.nodeType){case a:case g:var n=[];for(t=t.firstChild;t;)7!==t.nodeType&&8!==t.nodeType&&n.push(e(t)),t=t.nextSibling;return n.join("");default:return t.nodeValue}}(this)},set:function(e){switch(this.nodeType){case a:case g:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),ne=function(e,t,n){e["$$"+t]=n})}catch(e){}t.DOMImplementation=_,t.XMLSerializer=J},function(e,t,n){"use strict";n(6).main()},function(e,t){var n=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,r=new RegExp("[\\-\\.0-9"+n.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),i=new RegExp("^"+n.source+r.source+"*(?::"+n.source+r.source+"*)?$"),o=0,a=1,s=2,u=3,l=4,c=5,f=6,p=7;function h(){}function d(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function m(e,t,n,r,i,h){for(var d,m=++t,g=o;;){var v=e.charAt(m);switch(v){case"=":if(g===a)d=e.slice(t,m),g=u;else{if(g!==s)throw new Error("attribute equal must after attrName");g=u}break;case"'":case'"':if(g===u||g===a){if(g===a&&(h.warning('attribute value must after "="'),d=e.slice(t,m)),t=m+1,!(0<(m=e.indexOf(v,t))))throw new Error("attribute value no end '"+v+"' match");b=e.slice(t,m).replace(/&#?\w+;/g,i),n.add(d,b,t-1),g=c}else{if(g!=l)throw new Error('attribute value must after "="');b=e.slice(t,m).replace(/&#?\w+;/g,i),n.add(d,b,t),h.warning('attribute "'+d+'" missed start quot('+v+")!!"),t=m+1,g=c}break;case"/":switch(g){case o:n.setTagName(e.slice(t,m));case c:case f:case p:g=p,n.closed=!0;case l:case a:case s:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return h.error("unexpected end of input"),g==o&&n.setTagName(e.slice(t,m)),m;case">":switch(g){case o:n.setTagName(e.slice(t,m));case c:case f:case p:break;case l:case a:"/"===(b=e.slice(t,m)).slice(-1)&&(n.closed=!0,b=b.slice(0,-1));case s:g===s&&(b=d),g==l?(h.warning('attribute "'+b+'" missed quot(")!!'),n.add(d,b.replace(/&#?\w+;/g,i),t)):("http://www.w3.org/1999/xhtml"===r[""]&&b.match(/^(?:disabled|checked|selected)$/i)||h.warning('attribute "'+b+'" missed value!! "'+b+'" instead!!'),n.add(b,b,t));break;case u:throw new Error("attribute value missed!!")}return m;case"":v=" ";default:if(v<=" ")switch(g){case o:n.setTagName(e.slice(t,m)),g=f;break;case a:d=e.slice(t,m),g=s;break;case l:var b=e.slice(t,m).replace(/&#?\w+;/g,i);h.warning('attribute "'+b+'" missed quot(")!!'),n.add(d,b,t);case c:g=f}else switch(g){case s:n.tagName,"http://www.w3.org/1999/xhtml"===r[""]&&d.match(/^(?:disabled|checked|selected)$/i)||h.warning('attribute "'+d+'" missed value!! "'+d+'" instead2!!'),n.add(d,d,t),t=m,g=a;break;case c:h.warning('attribute space is required"'+d+'"!!');case f:g=a,t=m;break;case u:g=l,t=m;break;case p:throw new Error("elements closed character '/' and '>' must be connected to")}}m++}}function g(e,t,n){for(var r=e.tagName,i=null,o=e.length;o--;){var a=e[o],s=a.qName,u=a.value;if(0<(p=s.indexOf(":")))var l=a.prefix=s.slice(0,p),c=s.slice(p+1),f="xmlns"===l&&c;else l=null,f="xmlns"===(c=s)&&"";a.localName=c,!1!==f&&(null==i&&(i={},y(n,n={})),n[f]=i[f]=u,a.uri="http://www.w3.org/2000/xmlns/",t.startPrefixMapping(f,u))}for(o=e.length;o--;)(l=(a=e[o]).prefix)&&("xml"===l&&(a.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==l&&(a.uri=n[l||""]));var p;c=0<(p=r.indexOf(":"))?(l=e.prefix=r.slice(0,p),e.localName=r.slice(p+1)):(l=null,e.localName=r);var h=e.uri=n[l||""];if(t.startElement(h,c,r,e),!e.closed)return e.currentNSMap=n,e.localNSMap=i,!0;if(t.endElement(h,c,r),i)for(l in i)t.endPrefixMapping(l)}function v(e,t,n,r,i){if(/^(?:script|textarea)$/i.test(n)){var o=e.indexOf("</"+n+">",t),a=e.substring(t+1,o);if(/[&<]/.test(a))return/^script$/i.test(n)||(a=a.replace(/&#?\w+;/g,r)),i.characters(a,0,a.length),o}return t+1}function b(e,t,n,r){var i=r[n];return null==i&&((i=e.lastIndexOf("</"+n+">"))<t&&(i=e.lastIndexOf("</"+n)),r[n]=i),i<t}function y(e,t){for(var n in e)t[n]=e[n]}function N(e,t,n,r){switch(e.charAt(t+2)){case"-":return"-"!==e.charAt(t+3)?-1:t<(i=e.indexOf("--\x3e",t+4))?(n.comment(e,t+4,i-t-4),i+3):(r.error("Unclosed comment"),-1);default:if("CDATA["==e.substr(t+3,6)){var i=e.indexOf("]]>",t+9);return n.startCDATA(),n.characters(e,t+9,i-t-9),n.endCDATA(),i+3}var o=function(e,t){var n,r=[],i=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(i.lastIndex=t,i.exec(e);n=i.exec(e);)if(r.push(n),n[1])return r}(e,t),a=o.length;if(1<a&&/!doctype/i.test(o[0][0])){var s=o[1][0],u=3<a&&/^public$/i.test(o[2][0])&&o[3][0],l=4<a&&o[4][0],c=o[a-1];return n.startDTD(s,u&&u.replace(/^(['"])(.*?)\1$/,"$2"),l&&l.replace(/^(['"])(.*?)\1$/,"$2")),n.endDTD(),c.index+c[0].length}}return-1}function w(e,t,n){var r=e.indexOf("?>",t);if(r){var i=e.substring(t,r).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return i?(i[0].length,n.processingInstruction(i[1],i[2]),r+2):-1}return-1}function x(e){}function E(e,t){return e.__proto__=t,e}h.prototype={parse:function(e,t,n){var r=this.domBuilder;r.startDocument(),y(t,t={}),function(e,t,n,r,i){function o(e){var t=e.slice(1,-1);return t in n?n[t]:"#"===t.charAt(0)?function(e){if(65535<e){var t=55296+((e-=65536)>>10),n=56320+(1023&e);return String.fromCharCode(t,n)}return String.fromCharCode(e)}(parseInt(t.substr(1).replace("x","0x"))):(i.error("entity not found:"+e),e)}function a(t){if(y<t){var n=e.substring(y,t).replace(/&#?\w+;/g,o);f&&s(y),r.characters(n,0,t-y),y=t}}function s(t,n){for(;l<=t&&(n=c.exec(e));)u=n.index,l=u+n[0].length,f.lineNumber++;f.columnNumber=t-u+1}for(var u=0,l=0,c=/.*(?:\r\n?|\n)|.*$/g,f=r.locator,p=[{currentNSMap:t}],h={},y=0;;){try{var E=e.indexOf("<",y);if(E<0){if(!e.substr(y).match(/^\s*$/)){var C=r.doc,D=C.createTextNode(e.substr(y));C.appendChild(D),r.currentElement=D}return}switch(y<E&&a(E),e.charAt(E+1)){case"/":var S=e.indexOf(">",E+3),A=e.substring(E+2,S),T=p.pop();S<0?(A=e.substring(E+2).replace(/[\s<].*/,""),i.error("end tag name: "+A+" is not complete:"+T.tagName),S=E+1+A.length):A.match(/\s</)&&(A=A.replace(/[\s<].*/,""),i.error("end tag name: "+A+" maybe not complete"),S=E+1+A.length);var k=T.localNSMap,I=T.tagName==A;if(I||T.tagName&&T.tagName.toLowerCase()==A.toLowerCase()){if(r.endElement(T.uri,T.localName,A),k)for(var _ in k)r.endPrefixMapping(_);I||i.fatalError("end tag name: "+A+" is not match the current start tagName:"+T.tagName)}else p.push(T);S++;break;case"?":f&&s(E),S=w(e,E,r);break;case"!":f&&s(E),S=N(e,E,r,i);break;default:f&&s(E);var O=new x,R=p[p.length-1].currentNSMap,M=(S=m(e,E,O,R,o,i),O.length);if(!O.closed&&b(e,S,O.tagName,h)&&(O.closed=!0,n.nbsp||i.warning("unclosed xml attribute")),f&&M){for(var F=d(f,{}),L=0;L<M;L++){var U=O[L];s(U.offset),U.locator=d(f,{})}r.locator=F,g(O,r,R)&&p.push(O),r.locator=f}else g(O,r,R)&&p.push(O);"http://www.w3.org/1999/xhtml"!==O.uri||O.closed?S++:S=v(e,S,O.tagName,o,r)}}catch(t){i.error("element parse error: "+t),S=-1}y<S?y=S:a(Math.max(E,y)+1)}}(e,t,n,r,this.errorHandler),r.endDocument()}},x.prototype={setTagName:function(e){if(!i.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},add:function(e,t,n){if(!i.test(e))throw new Error("invalid attribute:"+e);this[this.length++]={qName:e,value:t,offset:n}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},E({},E.prototype)instanceof E||(E=function(e,t){function n(){}for(t in n.prototype=t,n=new n,e)n[t]=e[t];return n}),t.XMLReader=h},function(e,t,n){"use strict";n.r(t);var r="http://www.w3.org/2000/svg",i="http://www.w3.org/1999/xlink";function o(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}function a(e,t,n,r){if(null===t){if(null===n){var i=o(e,r);return[e,e,i,i,i,r,r]}t=e}null===n&&(n=r);var a=o(e,t),s=o(t,n),u=o(n,r),l=o(a,s),c=o(s,u);return[e,a,l,o(l,c),c,u,r]}function s(e,t){return null===e&&(e=0),null===t&&(t=0),{x:t*Math.cos(e),y:t*Math.sin(e)}}function u(e){for(;e<=-Math.PI;)e+=2*Math.PI;for(;e>Math.PI;)e-=2*Math.PI;return e}function l(e){return e*Math.PI/180}var c="pink";function f(e,t,n){return"linear"===e.type?function(e,t,n){if(0===e.length)return c;var r=e[e.length-1],i=0,o=0,a=0;if(n<e[0].position)return""+e[0][t];if(n>=r.position)return""+r[t];for(var s=!1,u=0;u<e.length-1;++u)if(n>=e[u].position&&n<e[u+1].position){var l=e[u].position,f=Number.parseInt((""+e[u][t]).substr(1,2),16),h=Number.parseInt((""+e[u][t]).substr(3,2),16),d=Number.parseInt((""+e[u][t]).substr(5,2),16),m=e[u+1].position,g=Number.parseInt((""+e[u+1][t]).substr(1,2),16),v=Number.parseInt((""+e[u+1][t]).substr(3,2),16),b=Number.parseInt((""+e[u+1][t]).substr(5,2),16);i=p(n,l,m,f,g),o=p(n,l,m,h,v),a=p(n,l,m,d,b),s=!0;break}return s?"rgb("+Math.floor(i)+", "+Math.floor(o)+", "+Math.floor(a)+")":c}(e.stops,t,n):"steps"===e.type?function(e,t,n){if(0===e.length)return c;var r=e[e.length-1];if(n<e[0].position)return""+e[0][t];if(n>=r.position)return""+r[t];for(var i=0;i<e.length-1;++i)if(n>=e[i].position&&n<e[i+1].position)return""+e[i][t];return c}(e.stops,t,n):c}function p(e,t,n,r,i){return r===i?r:(e<t&&(e=t),n<e&&(e=n),r+(e-t)/(n-t)*(i-r))}var h=100,d=5;function m(e,t,n,r,i,o){if("linear"===t.type){var a="WeathermapLegendGradient-"+n;null!=o&&(a=a+"-"+o);var s=e.linearGradient();i.appendChild(s),s.setAttribute("id",a);for(var u=0,l=t.stops;u<l.length;u++){var c=l[u],f=e.stop();s.appendChild(f),f.setAttribute("offset",c.position+"%"),f.setAttribute("stop-color",""+c[n])}var p=e.rect();r.appendChild(p),y(p,0,0,h,d),p.setAttribute("style","fill:url(#"+a+")")}else if("steps"===t.type){for(var m=1;m<t.stops.length;++m){var g=e.rect();r.appendChild(g),y(g,t.stops[m-1].position,0,t.stops[m].position-t.stops[m-1].position,d),g.setAttribute("style","fill:"+t.stops[m-1][n])}var v=e.rect();r.appendChild(v),y(v,t.stops[t.stops.length-1].position,0,100-t.stops[t.stops.length-1].position,d),v.setAttribute("style","fill:"+t.stops[t.stops.length-1][n])}}function g(e,t,n,r,i,o){void 0===o&&(o=!1);var c=n.gradient.stops.slice().sort((function(e,t){return e.position-t.position})),p={type:n.gradient.type,stops:c},g=new w(e,n,p,r);return function(e,t,n){void 0===n&&(n=!1),e.svg=e.make.svg(),N(e.svg,{width:e.config.canvasSize.width+"px",height:e.config.canvasSize.height+"px"}),n&&e.svg.setAttribute("viewBox","0 0 "+e.config.canvasSize.width+" "+e.config.canvasSize.height),t.appendChild(e.svg),e.defs=e.make.defs(),e.svg.appendChild(e.defs),e.legendGroup=e.make.g(),e.legendGroup.setAttribute("class","legend"),e.svg.appendChild(e.legendGroup),e.edgeGroup=e.make.g(),e.edgeGroup.setAttribute("class","edges"),e.svg.appendChild(e.edgeGroup),e.nodeGroup=e.make.g(),e.nodeGroup.setAttribute("class","nodes"),e.svg.appendChild(e.nodeGroup),e.labelGroup=e.make.g(),e.labelGroup.setAttribute("class","labels"),e.svg.appendChild(e.labelGroup)}(g,t,o),null!=i&&(g.nodeLinkUriBase=i(n.link.node),g.edgeLinkUriBase=i(n.link.edge)),function(e){for(var t=0,n=e.config.weathermapNodes;t<n.length;t++){var r=n[t];e.nodeLabelToNode[r.label]=r;var i=e.make.g();b(e.make,e.nodeGroup,i,e.nodeLinkUriBase,r.linkParams);var o=e.make.rect();i.appendChild(o),y(o,r.x,r.y,r.width,r.height),N(o,{stroke:"gray","stroke-width":"1px"});var a=e.make.text();if(i.appendChild(a),a.setAttribute("x",""+(+r.x+ +e.config.textOffsets.left)),a.setAttribute("y",""+(+r.y+ +r.height-e.config.textOffsets.bottom)),e.config.showNumbers&&null!=r.metricName){var s=r.metricName in e.currentValues?""+e.currentValues[r.metricName]:"?";a.textContent=r.label+" ("+s+")"}else a.textContent=r.label;if(r.metricName)if(r.metricName in e.currentValues){var u=e.currentValues[r.metricName];N(o,{fill:f(e.sortedGradient,"fillColor",u)})}else N(a,{fill:"white"}),N(o,{fill:"black","stroke-dasharray":e.config.noValueDashArray});else N(o,{fill:"silver","stroke-dasharray":e.config.unmeasuredDashArray})}}(g),function(e){for(var t=0,n=e.config.weathermapEdges;t<n.length;t++){var r=n[t],i=e.nodeLabelToNode[r.node1],o=e.nodeLabelToNode[r.node2];if(i&&o){var c=e.make.g();b(e.make,e.edgeGroup,c,e.edgeLinkUriBase,r.linkParams);var f={x:+i.x+i.width/2,y:+i.y+i.height/2},p={x:+o.x+o.width/2,y:+o.y+o.height/2},h=null,d=null;if(r.bendDirection&&r.bendMagnitude){var m=Math.atan2(f.y-p.y,p.x-f.x),g=Math.atan2(p.y-f.y,f.x-p.x),y=u(m+l(r.bendDirection)),N=u(g-l(r.bendDirection)),w=s(y,r.bendMagnitude),x=s(N,r.bendMagnitude);h={x:+f.x+w.x,y:f.y-w.y},d={x:+p.x+x.x,y:p.y-x.y}}if(r.metric2Name){var E=a(f,h,d,p),C=E[1],D=E[2],S=E[3],A=E[4],T=E[5];v(e,c,f,C,D,S,r.metricName,r.styleName,r.node1+" → "+r.node2),v(e,c,S,A,T,p,r.metric2Name,r.styleName,r.node2+" → "+r.node1)}else v(e,c,f,h,d,p,r.metricName,r.styleName,r.node1+" ↔ "+r.node2)}}}(g),function(e){for(var t=0,n=e.config.weathermapLabels;t<n.length;t++){var r=n[t],i=e.make.g();e.labelGroup.appendChild(i);var o=e.make.text();i.appendChild(o),o.setAttribute("x",""+ +r.x),o.setAttribute("y",""+ +r.y),o.textContent=r.label}}(g),function(e,t,n,r,i,o){var a="";if(""!==t.type){var s=e.g();n.appendChild(s),s.setAttribute("class","stroke-legend"),"h"===t.type[0]?a="translate("+t.x+" "+t.y+") scale("+t.length/h+" "+t.width/d+")":"v"===t.type[0]&&(a="translate("+t.x+" "+(t.y+t.length)+") rotate(-90) scale("+t.length/h+" "+t.width/d+")"),s.setAttribute("transform",a),m(e,i,"strokeColor",s,r,o);var u=e.g();n.appendChild(u),s.setAttribute("class","fill-legend"),"h"===t.type[0]?a="translate("+t.x+" "+(t.y+t.width)+") scale("+t.length/h+" "+t.width/d+")":"v"===t.type[0]&&(a="translate("+(t.x+t.width)+" "+(t.y+t.length)+") rotate(-90) scale("+t.length/h+" "+t.width/d+")"),u.setAttribute("transform",a),m(e,i,"fillColor",u,r,o),function(e,t,n,r){if(""!==t.type&&"n"!==t.type[1])for(var i=0,o=n.stops;i<o.length;i++){var a=o[i];if(a.showLegendLabel){var s=t.x,u=t.y,l=0,c="start";"h"===t.type[0]?(s+=a.position*t.length/h,c="middle","hb"===t.type&&(u+=2*t.width,l=1)):"v"===t.type[0]&&(u+=t.length-a.position*t.length/h,l=.4,"vl"===t.type?c="end":"vr"===t.type&&(c="start",s+=2*t.width));var f=e.text();r.appendChild(f),f.setAttribute("class","legend-label"),f.setAttribute("x",""+s),f.setAttribute("y",""+u),f.setAttribute("dy",l+"em"),f.setAttribute("style","text-anchor:"+c),f.textContent=""+a.position}}}(e,t,i,n)}}(g.make,n.legend,g.legendGroup,g.defs,p,""+n.id),g.svg}function v(e,t,n,r,i,o,s,u,l){var c=[e.config.strokeWidth],p=function(e,t){return t&&e.styleMap[t]||null}(e,u);p&&p.strokeWidthArray&&(c=p.strokeWidthArray.split(/[ ,]+/).map((function(e){return Number.parseFloat(e)}))),c.length%2!=1&&c.push.apply(c,c);var h={x:0,y:0};if(1<c.length){var d={x:n.x-o.x,y:n.y-o.y};h=function(e){var t=Math.sqrt(e.x*e.x+e.y*e.y);return{x:e.x/t,y:e.y/t}}({x:d.y,y:-d.x})}var m=e.make.g();if(t.appendChild(m),N(m,{fill:"none"}),l){var g=e.make.title();m.appendChild(g),g.textContent=l}if(null!=s&&s in e.currentValues){var v=e.currentValues[s];N(m,{stroke:f(e.sortedGradient,"strokeColor",v)}),function(e,t,n){if(n){var r={};n.dashArray&&(r["stroke-dasharray"]=n.dashArray),N(t,r)}}(0,m,p)}else N(m,{stroke:"black","stroke-dasharray":e.config.noValueDashArray});for(var b=-c.reduce((function(e,t){return e+t}),0)/2,y=!0,w=0,x=c;w<x.length;w++){var E=x[w];if(y=!y)b+=E;else{var C=h.x*(b+E/2),D=h.y*(b+E/2),S=n.x+C,A=n.y+D,T=null==r?null:{x:r.x+C,y:r.y+D},k=null==i?null:{x:i.x+C,y:i.y+D},I=o.x+C,_=o.y+D,O=e.make.path();m.appendChild(O),null==T||null==k?O.setAttribute("d","M "+S+","+A+" L "+I+","+_):O.setAttribute("d","M "+S+","+A+" C "+T.x+","+T.y+","+k.x+","+k.y+","+I+","+_),N(O,{"stroke-width":""+E}),b+=E}}if(e.config.showNumbers){var R=a(n,r,i,o)[3],M=null!=s&&s in e.currentValues?e.currentValues[s].toFixed(2):"?",F=e.make.text();t.appendChild(F),F.setAttribute("x",""+R.x),F.setAttribute("y",""+R.y),F.textContent=M}}function b(e,t,n,r,o){if(null!=r){var a=r;null!=o&&(a+=-1===a.indexOf("?")?"?":"&",a+=o);var s=e.a();t.appendChild(s),s.setAttributeNS(i,"href",a),s.appendChild(n)}else t.appendChild(n)}function y(e,t,n,r,i){e.setAttribute("x",""+t),e.setAttribute("y",""+n),e.setAttribute("width",""+r),e.setAttribute("height",""+i)}function N(e,t){var n={};if(e.hasAttribute("style")){var r=e.getAttribute("style");if(null!=r)for(var i=0,o=r.split(";");i<o.length;i++){var a=o[i],s=a.indexOf(":");if(-1!==s){var u=a.substr(0,s),l=a.substr(s+1);n[u]=l}}}for(var u in t)t.hasOwnProperty(u)&&(null===t[u]?delete n[u]:n[u]=t[u]);var c=[];for(var u in n)n.hasOwnProperty(u)&&c.push(u+":"+n[u]);var f=c.join(";");e.setAttribute("style",f)}var w=function(e,t,n,r){if(this.make=new x(e),this.config=t,this.sortedGradient=n,this.currentValues=r,this.nodeLabelToNode={},this.nodeLinkUriBase=null,this.edgeLinkUriBase=null,this.svg=null,this.defs=null,this.edgeGroup=null,this.nodeGroup=null,this.labelGroup=null,this.legendGroup=null,this.styleMap={},t.weathermapStyles)for(var i=0,o=t.weathermapStyles;i<o.length;i++){var a=o[i];this.styleMap[a.name]=a}},x=(E.prototype.a=function(){return this.maker.createElementNS(r,"a")},E.prototype.defs=function(){return this.maker.createElementNS(r,"defs")},E.prototype.g=function(){return this.maker.createElementNS(r,"g")},E.prototype.linearGradient=function(){return this.maker.createElementNS(r,"linearGradient")},E.prototype.path=function(){return this.maker.createElementNS(r,"path")},E.prototype.rect=function(){return this.maker.createElementNS(r,"rect")},E.prototype.stop=function(){return this.maker.createElementNS(r,"stop")},E.prototype.svg=function(){return this.maker.createElementNS(r,"svg")},E.prototype.text=function(){return this.maker.createElementNS(r,"text")},E.prototype.title=function(){return this.maker.createElementNS(r,"title")},E);function E(e){this.maker=e}var C=n(0),D=n(1),S=function(e,t,n,r){return new(n=n||Promise)((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}u((r=r.apply(e,t||[])).next())}))},A=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=0<(i=a.trys).length&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};function T(e,t,n){return S(this,void 0,void 0,(function(){var r,i,o,a,s,u,l,c,f,p,h,d,m,g,v,b,y;return A(this,(function(N){switch(N.label){case 0:r=new D.Agent,i={},o=0,a=t,N.label=1;case 1:return o<a.length?(s=a[o],u=encodeURIComponent(s.expr.replace("$lookback_interval",n).replace("$__range",n)),[4,function(e,t,n,r,i){return new Promise((function(o,a){var s={protocol:e,hostname:t,port:n,path:r,agent:i},u=D.request(s,(function(e){var t="";e.on("data",(function(e){t+=e})),e.on("end",(function(){o([e,t])}))}));u.on("error",(function(e){a(e)})),u.end()}))}((l=new URL("api/v1/query?query="+u,e)).protocol,l.hostname,+l.port,l.pathname+l.search,r)]):[3,4];case 2:for(c=N.sent(),f=c[0],p=c[1],h=JSON.parse(p),d=0,m=h.data.result;d<m.length;d++)g=m[d],v=g.metric,b=g.value[1],y=k(s.legendFormat,v),i[y]=b;f.destroy(),N.label=3;case 3:return o++,[3,1];case 4:return r.destroy(),[2,i]}}))}))}function k(e,t){for(var n=e;;){var r=n.indexOf("{{");if(-1===r)return n;var i=n.indexOf("}}",r);if(-1===i)return n;var o=n.substr(r+2,i-r-2),a=o in t?t[o]:"";n=n.substr(0,r)+a+n.substr(i+2)}}var I=n(2);n.d(t,"main",(function(){return F}));var _=function(e,t,n,r){return new(n=n||Promise)((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}u((r=r.apply(e,t||[])).next())}))},O=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=0<(i=a.trys).length&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},R={configFile:"genwmap.json",outputFile:"weathermap.svg"};function M(){console.error("Usage: genwmap [-c CONFIG.json] [-o OUTPUT.svg]")}function F(){return _(this,void 0,void 0,(function(){var e,t,n,i,o,a,s,u,l,c,f,p,h,d;return O(this,(function(m){switch(m.label){case 0:return function(){for(var e=null,t=2;t<process.argv.length;++t){var n=process.argv[t];if(null===e){if("-c"!==n&&"-o"!==n)return console.error("Unknown option '"+n+"'"),M(),!1;e=n}else"-c"===e?R.configFile=n:"-o"===e&&(R.outputFile=n),e=null}return null===e||(console.error("No value specified for option '"+e+"'"),M(),!1)}()?[4,function(e){return new Promise((function(t,n){I.readFile(e,{encoding:"utf8"},(function(e,r){e?n(e):t(r)}))}))}(R.configFile)]:(process.exitCode=1,[2]);case 1:return e=m.sent(),t=JSON.parse(e),n=t.weathermap,i=t.weathermap.targets,o=t.dataSources,a=t.lookbackInterval,s=t.styleDefinition,[4,T(new URL(o[t.weathermap.datasource]),i,a)];case 2:return u=m.sent(),l=new C.DOMImplementation,c=l.createDocument(null,null,null),f=g(c,c,n,u,null,!0),s&&(p=c.createElementNS(r,"style"),f.insertBefore(p,f.firstElementChild),p.setAttribute("type","text/css"),p.textContent=s),h=new C.XMLSerializer,d=h.serializeToString(c),[4,function(e,t,n){return new Promise((function(r,i){I.writeFile(e,t,n,(function(e){e?i(e):r()}))}))}(R.outputFile,d,{})];case 3:return m.sent(),[2]}}))}))}}]);
//# sourceMappingURL=genwmap.js.map