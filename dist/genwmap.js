!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){function r(e){this.options=e||{locator:{}}}function i(){this.cdata=!1}function o(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function a(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function s(e,t,n){return"string"==typeof e?e.substr(t,n):e.length>=t+n||t?new java.lang.String(e,t,n)+"":e}function u(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}r.prototype.parseFromString=function(e,t){var n=this.options,r=new l,o=n.domBuilder||new i,s=n.errorHandler,u=n.locator,c=n.xmlns||{},f={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return u&&o.setDocumentLocator(u),r.errorHandler=function(e,t,n){if(!e){if(t instanceof i)return t;e=t}var r={},o=e instanceof Function;function s(t){var i=e[t];!i&&o&&(i=2==e.length?function(n){e(t,n)}:e),r[t]=i?function(e){i("[xmldom "+t+"]\t"+e+a(n))}:function(){}}return n=n||{},s("warning"),s("error"),s("fatalError"),r}(s,o,u),r.domBuilder=n.domBuilder||o,/\/x?html?$/.test(t)&&(f.nbsp=" ",f.copy="©",c[""]="http://www.w3.org/1999/xhtml"),c.xml=c.xml||"http://www.w3.org/XML/1998/namespace",e?r.parse(e,c,f):r.errorHandler.error("invalid doc source"),o.doc},i.prototype={startDocument:function(){this.doc=(new c).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,n,r){var i=this.doc,a=i.createElementNS(e,n||t),s=r.length;u(this,a),this.currentElement=a,this.locator&&o(this.locator,a);for(var l=0;l<s;l++){e=r.getURI(l);var c=r.getValue(l),f=(n=r.getQName(l),i.createAttributeNS(e,n));this.locator&&o(r.getLocator(l),f),f.value=f.nodeValue=c,a.setAttributeNode(f)}},endElement:function(e,t,n){var r=this.currentElement;r.tagName,this.currentElement=r.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var n=this.doc.createProcessingInstruction(e,t);this.locator&&o(this.locator,n),u(this,n)},ignorableWhitespace:function(e,t,n){},characters:function(e,t,n){if(e=s.apply(this,arguments)){if(this.cdata)var r=this.doc.createCDATASection(e);else r=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(r):/^\s*$/.test(e)&&this.doc.appendChild(r),this.locator&&o(this.locator,r)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,n){e=s.apply(this,arguments);var r=this.doc.createComment(e);this.locator&&o(this.locator,r),u(this,r)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,n){var r=this.doc.implementation;if(r&&r.createDocumentType){var i=r.createDocumentType(e,t,n);this.locator&&o(this.locator,i),u(this,i)}},warning:function(e){console.warn("[xmldom warning]\t"+e,a(this.locator))},error:function(e){console.error("[xmldom error]\t"+e,a(this.locator))},fatalError:function(e){throw console.error("[xmldom fatalError]\t"+e,a(this.locator)),e}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,(function(e){i.prototype[e]=function(){return null}}));var l=n(5).XMLReader,c=t.DOMImplementation=n(3).DOMImplementation;t.XMLSerializer=n(3).XMLSerializer,t.DOMParser=r},function(e,t){e.exports=require("http")},function(e,t){e.exports=require("fs")},function(e,t){function n(e,t){for(var n in e)t[n]=e[n]}function r(e,t){var r=e.prototype;if(Object.create){var i=Object.create(t.prototype);r.__proto__=i}if(!(r instanceof t)){function o(){}o.prototype=t.prototype,n(r,o=new o),e.prototype=r=o}r.constructor!=e&&("function"!=typeof e&&console.error("unknow Class:"+e),r.constructor=e)}var i={},o=i.ELEMENT_NODE=1,a=i.ATTRIBUTE_NODE=2,s=i.TEXT_NODE=3,u=i.CDATA_SECTION_NODE=4,l=i.ENTITY_REFERENCE_NODE=5,c=i.ENTITY_NODE=6,f=i.PROCESSING_INSTRUCTION_NODE=7,p=i.COMMENT_NODE=8,d=i.DOCUMENT_NODE=9,h=i.DOCUMENT_TYPE_NODE=10,m=i.DOCUMENT_FRAGMENT_NODE=11,g=i.NOTATION_NODE=12,v={},b={},y=(v.INDEX_SIZE_ERR=(b[1]="Index size error",1),v.DOMSTRING_SIZE_ERR=(b[2]="DOMString size error",2),v.HIERARCHY_REQUEST_ERR=(b[3]="Hierarchy request error",3)),N=(v.WRONG_DOCUMENT_ERR=(b[4]="Wrong document",4),v.INVALID_CHARACTER_ERR=(b[5]="Invalid character",5),v.NO_DATA_ALLOWED_ERR=(b[6]="No data allowed",6),v.NO_MODIFICATION_ALLOWED_ERR=(b[7]="No modification allowed",7),v.NOT_FOUND_ERR=(b[8]="Not found",8)),w=(v.NOT_SUPPORTED_ERR=(b[9]="Not supported",9),v.INUSE_ATTRIBUTE_ERR=(b[10]="Attribute in use",10));function x(e,t){if(t instanceof Error)var n=t;else n=this,Error.call(this,b[e]),this.message=b[e],Error.captureStackTrace&&Error.captureStackTrace(this,x);return n.code=e,t&&(this.message=this.message+": "+t),n}function E(){}function C(e,t){this._node=e,this._refresh=t,D(this)}function D(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var r=e._refresh(e._node);te(e,"length",r.length),n(r,e),e._inc=t}}function S(){}function A(e,t){for(var n=e.length;n--;)if(e[n]===t)return n}function T(e,t,n,r){if(r?t[A(t,r)]=n:t[t.length++]=n,e){var i=(n.ownerElement=e).ownerDocument;i&&(r&&F(i,e,r),a=e,s=n,(o=i)&&o._inc++,"http://www.w3.org/2000/xmlns/"==s.namespaceURI&&(a._nsMap[s.prefix?s.localName:""]=s.value))}var o,a,s}function k(e,t,n){var r=A(t,n);if(!(0<=r))throw x(N,new Error(e.tagName+"@"+n));for(var i=t.length-1;r<i;)t[r]=t[++r];if(t.length=i,e){var o=e.ownerDocument;o&&(F(o,e,n),n.ownerElement=null)}}function I(e){if(this._features={},e)for(var t in e)this._features=e[t]}function _(){}function O(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function R(e,t){if(t(e))return 1;if(e=e.firstChild)do{if(R(e,t))return 1}while(e=e.nextSibling)}function M(){}function F(e,t,n){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&delete t._nsMap[n.prefix?n.localName:""]}function L(e,t,n){if(e&&e._inc){e._inc++;var r=t.childNodes;if(n)r[r.length++]=n;else{for(var i=t.firstChild,o=0;i;)i=(r[o++]=i).nextSibling;r.length=o}}}function U(e,t){var n=t.previousSibling,r=t.nextSibling;return n?n.nextSibling=r:e.firstChild=r,r?r.previousSibling=n:e.lastChild=n,L(e.ownerDocument,e),t}function P(e,t,n){var r=t.parentNode;if(r&&r.removeChild(t),t.nodeType===m){var i=t.firstChild;if(null==i)return t;var o=t.lastChild}else i=o=t;var a=n?n.previousSibling:e.lastChild;for(i.previousSibling=a,o.nextSibling=n,a?a.nextSibling=i:e.firstChild=i,null==n?e.lastChild=o:n.previousSibling=o;i.parentNode=e,i!==o&&(i=i.nextSibling););return L(e.ownerDocument||e,e),t.nodeType==m&&(t.firstChild=t.lastChild=null),t}function G(){this._nsMap={}}function B(){}function V(){}function $(){}function j(){}function q(){}function z(){}function X(){}function W(){}function H(){}function Y(){}function Q(){}function Z(){}function J(e,t){var n=[],r=9==this.nodeType?this.documentElement:this,i=r.prefix,o=r.namespaceURI;if(o&&null==i&&null==(i=r.lookupPrefix(o)))var a=[{namespace:o,prefix:null}];return ee(this,n,e,t,a),n.join("")}function K(e,t,n){var r=e.prefix||"",i=e.namespaceURI;if((r||i)&&("xml"!==r||"http://www.w3.org/XML/1998/namespace"!==i)&&"http://www.w3.org/2000/xmlns/"!=i){for(var o=n.length;o--;){var a=n[o];if(a.prefix==r)return a.namespace!=i}return 1}}function ee(e,t,n,r,i){if(r){if(!(e=r(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case o:i=i||[];var c=e.attributes,g=c.length,v=e.firstChild,b=e.tagName;n="http://www.w3.org/1999/xhtml"===e.namespaceURI||n,t.push("<",b);for(var y=0;y<g;y++)"xmlns"==(N=c.item(y)).prefix?i.push({prefix:N.localName,namespace:N.value}):"xmlns"==N.nodeName&&i.push({prefix:"",namespace:N.value});for(y=0;y<g;y++){var N;if(K(N=c.item(y),0,i)){var w=N.prefix||"",x=N.namespaceURI,E=w?" xmlns:"+w:" xmlns";t.push(E,'="',x,'"'),i.push({prefix:w,namespace:x})}ee(N,t,n,r,i)}if(K(e,0,i)&&(w=e.prefix||"",x=e.namespaceURI,E=w?" xmlns:"+w:" xmlns",t.push(E,'="',x,'"'),i.push({prefix:w,namespace:x})),v||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(b)){if(t.push(">"),n&&/^script$/i.test(b))for(;v;)v.data?t.push(v.data):ee(v,t,n,r,i),v=v.nextSibling;else for(;v;)ee(v,t,n,r,i),v=v.nextSibling;t.push("</",b,">")}else t.push("/>");return;case d:case m:for(v=e.firstChild;v;)ee(v,t,n,r,i),v=v.nextSibling;return;case a:return t.push(" ",e.name,'="',e.value.replace(/[<&"]/g,O),'"');case s:return t.push(e.data.replace(/[<&]/g,O));case u:return t.push("<![CDATA[",e.data,"]]>");case p:return t.push("\x3c!--",e.data,"--\x3e");case h:var C=e.publicId,D=e.systemId;if(t.push("<!DOCTYPE ",e.name),C)t.push(' PUBLIC "',C),D&&"."!=D&&t.push('" "',D),t.push('">');else if(D&&"."!=D)t.push(' SYSTEM "',D,'">');else{var S=e.internalSubset;S&&t.push(" [",S,"]"),t.push(">")}return;case f:return t.push("<?",e.target," ",e.data,"?>");case l:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function te(e,t,n){e[t]=n}v.INVALID_STATE_ERR=(b[11]="Invalid state",11),v.SYNTAX_ERR=(b[12]="Syntax error",12),v.INVALID_MODIFICATION_ERR=(b[13]="Invalid modification",13),v.NAMESPACE_ERR=(b[14]="Invalid namespace",14),v.INVALID_ACCESS_ERR=(b[15]="Invalid access",15),x.prototype=Error.prototype,n(v,x),E.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var n=[],r=0;r<this.length;r++)ee(this[r],n,e,t);return n.join("")}},C.prototype.item=function(e){return D(this),this[e]},r(C,E),S.prototype={length:0,item:E.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var n=this[t];if(n.nodeName==e)return n}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new x(w);var n=this.getNamedItem(e.nodeName);return T(this._ownerElement,this,e,n),n},setNamedItemNS:function(e){var t,n=e.ownerElement;if(n&&n!=this._ownerElement)throw new x(w);return t=this.getNamedItemNS(e.namespaceURI,e.localName),T(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return k(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var n=this.getNamedItemNS(e,t);return k(this._ownerElement,this,n),n},getNamedItemNS:function(e,t){for(var n=this.length;n--;){var r=this[n];if(r.localName==t&&r.namespaceURI==e)return r}return null}},I.prototype={hasFeature:function(e,t){var n=this._features[e.toLowerCase()];return!(!n||t&&!(t in n))},createDocument:function(e,t,n){var r=new M;if(r.implementation=this,r.childNodes=new E,(r.doctype=n)&&r.appendChild(n),t){var i=r.createElementNS(e,t);r.appendChild(i)}return r},createDocumentType:function(e,t,n){var r=new z;return r.name=e,r.nodeName=e,r.publicId=t,r.systemId=n,r}},_.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return P(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild:function(e){return U(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return function e(t,n,r){var i=new n.constructor;for(var s in n){var u=n[s];"object"!=typeof u&&u!=i[s]&&(i[s]=u)}switch(n.childNodes&&(i.childNodes=new E),i.ownerDocument=t,i.nodeType){case o:var l=n.attributes,c=i.attributes=new S,f=l.length;c._ownerElement=i;for(var p=0;p<f;p++)i.setAttributeNode(e(t,l.item(p),!0));break;case a:r=!0}if(r)for(var d=n.firstChild;d;)i.appendChild(e(t,d,r)),d=d.nextSibling;return i}(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==s&&e.nodeType==s?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return 0<this.attributes.length},lookupPrefix:function(e){for(var t=this;t;){var n=t._nsMap;if(n)for(var r in n)if(n[r]==e)return r;t=t.nodeType==a?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var n=t._nsMap;if(n&&e in n)return n[e];t=t.nodeType==a?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)}},n(i,_),n(i,_.prototype),M.prototype={nodeName:"#document",nodeType:d,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType!=m)return null==this.documentElement&&e.nodeType==o&&(this.documentElement=e),P(this,e,t),e.ownerDocument=this,e;for(var n=e.firstChild;n;){var r=n.nextSibling;this.insertBefore(n,t),n=r}return e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),U(this,e)},importNode:function(e,t){return function e(t,n,r){var i;switch(n.nodeType){case o:(i=n.cloneNode(!1)).ownerDocument=t;case m:break;case a:r=!0}if((i=i||n.cloneNode(!1)).ownerDocument=t,i.parentNode=null,r)for(var s=n.firstChild;s;)i.appendChild(e(t,s,r)),s=s.nextSibling;return i}(this,e,t)},getElementById:function(e){var t=null;return R(this.documentElement,(function(n){if(n.nodeType==o&&n.getAttribute("id")==e)return t=n,!0})),t},createElement:function(e){var t=new G;return t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.childNodes=new E,(t.attributes=new S)._ownerElement=t},createDocumentFragment:function(){var e=new Y;return e.ownerDocument=this,e.childNodes=new E,e},createTextNode:function(e){var t=new $;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new j;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new q;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var n=new Q;return n.ownerDocument=this,n.tagName=n.target=e,n.nodeValue=n.data=t,n},createAttribute:function(e){var t=new B;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new H;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var n=new G,r=t.split(":"),i=n.attributes=new S;return n.childNodes=new E,n.ownerDocument=this,n.nodeName=t,n.tagName=t,n.namespaceURI=e,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=t,i._ownerElement=n},createAttributeNS:function(e,t){var n=new B,r=t.split(":");return n.ownerDocument=this,n.nodeName=t,n.name=t,n.namespaceURI=e,n.specified=!0,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=t,n}},r(M,_),M.prototype.getElementsByTagName=(G.prototype={nodeType:o,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var n=this.ownerDocument.createAttribute(e);n.value=n.nodeValue=""+t,this.setAttributeNode(n)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===m?this.insertBefore(e,null):function(e,t){var n=t.parentNode;if(n){var r=e.lastChild;n.removeChild(t),r=e.lastChild}return r=e.lastChild,t.parentNode=e,t.previousSibling=r,t.nextSibling=null,r?r.nextSibling=t:e.firstChild=t,e.lastChild=t,L(e.ownerDocument,e,t),t}(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);n&&this.removeAttributeNode(n)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);return n&&n.value||""},setAttributeNS:function(e,t,n){var r=this.ownerDocument.createAttributeNS(e,t);r.value=r.nodeValue=""+n,this.setAttributeNode(r)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new C(this,(function(t){var n=[];return R(t,(function(r){r===t||r.nodeType!=o||"*"!==e&&r.tagName!=e||n.push(r)})),n}))},getElementsByTagNameNS:function(e,t){return new C(this,(function(n){var r=[];return R(n,(function(i){i===n||i.nodeType!==o||"*"!==e&&i.namespaceURI!==e||"*"!==t&&i.localName!=t||r.push(i)})),r}))}}).getElementsByTagName,M.prototype.getElementsByTagNameNS=G.prototype.getElementsByTagNameNS,r(G,_),B.prototype.nodeType=a,r(B,_),V.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(b[y])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,n){n=this.data.substring(0,e)+n+this.data.substring(e+t),this.nodeValue=this.data=n,this.length=n.length}},r(V,_),$.prototype={nodeName:"#text",nodeType:s,splitText:function(e){var t=this.data,n=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var r=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(r,this.nextSibling),r}},r($,V),j.prototype={nodeName:"#comment",nodeType:p},r(j,V),q.prototype={nodeName:"#cdata-section",nodeType:u},r(q,V),z.prototype.nodeType=h,r(z,_),X.prototype.nodeType=g,r(X,_),W.prototype.nodeType=c,r(W,_),H.prototype.nodeType=l,r(H,_),Y.prototype.nodeName="#document-fragment",Y.prototype.nodeType=m,r(Y,_),Q.prototype.nodeType=f,r(Q,_),Z.prototype.serializeToString=function(e,t,n){return J.call(e,t,n)},_.prototype.toString=J;try{Object.defineProperty&&(Object.defineProperty(C.prototype,"length",{get:function(){return D(this),this.$$length}}),Object.defineProperty(_.prototype,"textContent",{get:function(){return function e(t){switch(t.nodeType){case o:case m:var n=[];for(t=t.firstChild;t;)7!==t.nodeType&&8!==t.nodeType&&n.push(e(t)),t=t.nextSibling;return n.join("");default:return t.nodeValue}}(this)},set:function(e){switch(this.nodeType){case o:case m:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),te=function(e,t,n){e["$$"+t]=n})}catch(e){}t.DOMImplementation=I,t.XMLSerializer=Z},function(e,t,n){"use strict";n(6).main()},function(e,t){var n=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,r=new RegExp("[\\-\\.0-9"+n.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),i=new RegExp("^"+n.source+r.source+"*(?::"+n.source+r.source+"*)?$");function o(){}function a(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function s(e,t,n,r,i,o){for(var a,s=++t,u=0;;){var l=e.charAt(s);switch(l){case"=":if(1===u)a=e.slice(t,s),u=3;else{if(2!==u)throw new Error("attribute equal must after attrName");u=3}break;case"'":case'"':if(3===u||1===u){if(1===u&&(o.warning('attribute value must after "="'),a=e.slice(t,s)),t=s+1,!(0<(s=e.indexOf(l,t))))throw new Error("attribute value no end '"+l+"' match");c=e.slice(t,s).replace(/&#?\w+;/g,i),n.add(a,c,t-1),u=5}else{if(4!=u)throw new Error('attribute value must after "="');c=e.slice(t,s).replace(/&#?\w+;/g,i),n.add(a,c,t),o.warning('attribute "'+a+'" missed start quot('+l+")!!"),t=s+1,u=5}break;case"/":switch(u){case 0:n.setTagName(e.slice(t,s));case 5:case 6:case 7:u=7,n.closed=!0;case 4:case 1:case 2:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return o.error("unexpected end of input"),0==u&&n.setTagName(e.slice(t,s)),s;case">":switch(u){case 0:n.setTagName(e.slice(t,s));case 5:case 6:case 7:break;case 4:case 1:"/"===(c=e.slice(t,s)).slice(-1)&&(n.closed=!0,c=c.slice(0,-1));case 2:2===u&&(c=a),4==u?(o.warning('attribute "'+c+'" missed quot(")!!'),n.add(a,c.replace(/&#?\w+;/g,i),t)):("http://www.w3.org/1999/xhtml"===r[""]&&c.match(/^(?:disabled|checked|selected)$/i)||o.warning('attribute "'+c+'" missed value!! "'+c+'" instead!!'),n.add(c,c,t));break;case 3:throw new Error("attribute value missed!!")}return s;case"":l=" ";default:if(l<=" ")switch(u){case 0:n.setTagName(e.slice(t,s)),u=6;break;case 1:a=e.slice(t,s),u=2;break;case 4:var c=e.slice(t,s).replace(/&#?\w+;/g,i);o.warning('attribute "'+c+'" missed quot(")!!'),n.add(a,c,t);case 5:u=6}else switch(u){case 2:n.tagName,"http://www.w3.org/1999/xhtml"===r[""]&&a.match(/^(?:disabled|checked|selected)$/i)||o.warning('attribute "'+a+'" missed value!! "'+a+'" instead2!!'),n.add(a,a,t),t=s,u=1;break;case 5:o.warning('attribute space is required"'+a+'"!!');case 6:u=1,t=s;break;case 3:u=4,t=s;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}s++}}function u(e,t,n){for(var r=e.tagName,i=null,o=e.length;o--;){var a=e[o],s=a.qName,u=a.value;if(0<(d=s.indexOf(":")))var l=a.prefix=s.slice(0,d),c=s.slice(d+1),p="xmlns"===l&&c;else l=null,p="xmlns"===(c=s)&&"";a.localName=c,!1!==p&&(null==i&&(i={},f(n,n={})),n[p]=i[p]=u,a.uri="http://www.w3.org/2000/xmlns/",t.startPrefixMapping(p,u))}for(o=e.length;o--;)(l=(a=e[o]).prefix)&&("xml"===l&&(a.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==l&&(a.uri=n[l||""]));var d;c=0<(d=r.indexOf(":"))?(l=e.prefix=r.slice(0,d),e.localName=r.slice(d+1)):(l=null,e.localName=r);var h=e.uri=n[l||""];if(t.startElement(h,c,r,e),!e.closed)return e.currentNSMap=n,e.localNSMap=i,1;if(t.endElement(h,c,r),i)for(l in i)t.endPrefixMapping(l)}function l(e,t,n,r,i){if(/^(?:script|textarea)$/i.test(n)){var o=e.indexOf("</"+n+">",t),a=e.substring(t+1,o);if(/[&<]/.test(a))return/^script$/i.test(n)||(a=a.replace(/&#?\w+;/g,r)),i.characters(a,0,a.length),o}return t+1}function c(e,t,n,r){var i=r[n];return null==i&&((i=e.lastIndexOf("</"+n+">"))<t&&(i=e.lastIndexOf("</"+n)),r[n]=i),i<t}function f(e,t){for(var n in e)t[n]=e[n]}function p(e,t,n,r){switch(e.charAt(t+2)){case"-":return"-"!==e.charAt(t+3)?-1:t<(i=e.indexOf("--\x3e",t+4))?(n.comment(e,t+4,i-t-4),i+3):(r.error("Unclosed comment"),-1);default:if("CDATA["==e.substr(t+3,6)){var i=e.indexOf("]]>",t+9);return n.startCDATA(),n.characters(e,t+9,i-t-9),n.endCDATA(),i+3}var o=function(e,t){var n,r=[],i=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(i.lastIndex=t,i.exec(e);n=i.exec(e);)if(r.push(n),n[1])return r}(e,t),a=o.length;if(1<a&&/!doctype/i.test(o[0][0])){var s=o[1][0],u=3<a&&/^public$/i.test(o[2][0])&&o[3][0],l=4<a&&o[4][0],c=o[a-1];return n.startDTD(s,u&&u.replace(/^(['"])(.*?)\1$/,"$2"),l&&l.replace(/^(['"])(.*?)\1$/,"$2")),n.endDTD(),c.index+c[0].length}}return-1}function d(e,t,n){var r=e.indexOf("?>",t);if(r){var i=e.substring(t,r).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return i?(i[0].length,n.processingInstruction(i[1],i[2]),r+2):-1}return-1}function h(e){}function m(e,t){return e.__proto__=t,e}o.prototype={parse:function(e,t,n){var r=this.domBuilder;r.startDocument(),f(t,t={}),function(e,t,n,r,i){function o(e){var t=e.slice(1,-1);return t in n?n[t]:"#"===t.charAt(0)?function(e){if(65535<e){var t=55296+((e-=65536)>>10),n=56320+(1023&e);return String.fromCharCode(t,n)}return String.fromCharCode(e)}(parseInt(t.substr(1).replace("x","0x"))):(i.error("entity not found:"+e),e)}function f(t){if(x<t){var n=e.substring(x,t).replace(/&#?\w+;/g,o);y&&m(x),r.characters(n,0,t-x),x=t}}function m(t,n){for(;v<=t&&(n=b.exec(e));)g=n.index,v=g+n[0].length,y.lineNumber++;y.columnNumber=t-g+1}for(var g=0,v=0,b=/.*(?:\r\n?|\n)|.*$/g,y=r.locator,N=[{currentNSMap:t}],w={},x=0;;){try{var E=e.indexOf("<",x);if(E<0){if(!e.substr(x).match(/^\s*$/)){var C=r.doc,D=C.createTextNode(e.substr(x));C.appendChild(D),r.currentElement=D}return}switch(x<E&&f(E),e.charAt(E+1)){case"/":var S=e.indexOf(">",E+3),A=e.substring(E+2,S),T=N.pop();S<0?(A=e.substring(E+2).replace(/[\s<].*/,""),i.error("end tag name: "+A+" is not complete:"+T.tagName),S=E+1+A.length):A.match(/\s</)&&(A=A.replace(/[\s<].*/,""),i.error("end tag name: "+A+" maybe not complete"),S=E+1+A.length);var k=T.localNSMap,I=T.tagName==A;if(I||T.tagName&&T.tagName.toLowerCase()==A.toLowerCase()){if(r.endElement(T.uri,T.localName,A),k)for(var _ in k)r.endPrefixMapping(_);I||i.fatalError("end tag name: "+A+" is not match the current start tagName:"+T.tagName)}else N.push(T);S++;break;case"?":y&&m(E),S=d(e,E,r);break;case"!":y&&m(E),S=p(e,E,r,i);break;default:y&&m(E);var O=new h,R=N[N.length-1].currentNSMap,M=(S=s(e,E,O,R,o,i),O.length);if(!O.closed&&c(e,S,O.tagName,w)&&(O.closed=!0,n.nbsp||i.warning("unclosed xml attribute")),y&&M){for(var F=a(y,{}),L=0;L<M;L++){var U=O[L];m(U.offset),U.locator=a(y,{})}r.locator=F,u(O,r,R)&&N.push(O),r.locator=y}else u(O,r,R)&&N.push(O);"http://www.w3.org/1999/xhtml"!==O.uri||O.closed?S++:S=l(e,S,O.tagName,o,r)}}catch(t){i.error("element parse error: "+t),S=-1}x<S?x=S:f(Math.max(E,x)+1)}}(e,t,n,r,this.errorHandler),r.endDocument()}},h.prototype={setTagName:function(e){if(!i.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},add:function(e,t,n){if(!i.test(e))throw new Error("invalid attribute:"+e);this[this.length++]={qName:e,value:t,offset:n}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},m({},m.prototype)instanceof m||(m=function(e,t){function n(){}for(t in n.prototype=t,n=new n,e)n[t]=e[t];return n}),t.XMLReader=o},function(e,t,n){"use strict";n.r(t),n.d(t,"main",(function(){return k}));var r="http://www.w3.org/2000/svg";function i(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}function o(e,t,n,r){if(null===t){if(null===n){var o=i(e,r);return[e,e,o,o,o,r,r]}t=e}null===n&&(n=r);var a=i(e,t),s=i(t,n),u=i(n,r),l=i(a,s),c=i(s,u);return[e,a,l,i(l,c),c,u,r]}function a(e,t){return null===e&&(e=0),null===t&&(t=0),{x:t*Math.cos(e),y:t*Math.sin(e)}}function s(e){for(;e<=-Math.PI;)e+=2*Math.PI;for(;e>Math.PI;)e-=2*Math.PI;return e}function u(e){return e*Math.PI/180}var l="pink";function c(e,t,n){return"linear"===e.type?function(e,t,n){if(0===e.length)return l;var r=e[e.length-1],i=0,o=0,a=0;if(n<e[0].position)return""+e[0][t];if(n>=r.position)return""+r[t];for(var s=!1,u=0;u<e.length-1;++u)if(n>=e[u].position&&n<e[u+1].position){var c=e[u].position,p=Number.parseInt((""+e[u][t]).substr(1,2),16),d=Number.parseInt((""+e[u][t]).substr(3,2),16),h=Number.parseInt((""+e[u][t]).substr(5,2),16),m=e[u+1].position,g=Number.parseInt((""+e[u+1][t]).substr(1,2),16),v=Number.parseInt((""+e[u+1][t]).substr(3,2),16),b=Number.parseInt((""+e[u+1][t]).substr(5,2),16);i=f(n,c,m,p,g),o=f(n,c,m,d,v),a=f(n,c,m,h,b),s=!0;break}return s?"rgb("+Math.floor(i)+", "+Math.floor(o)+", "+Math.floor(a)+")":l}(e.stops,t,n):"steps"===e.type?function(e,t,n){if(0===e.length)return l;var r=e[e.length-1];if(n<e[0].position)return""+e[0][t];if(n>=r.position)return""+r[t];for(var i=0;i<e.length-1;++i)if(n>=e[i].position&&n<e[i+1].position)return""+e[i][t];return l}(e.stops,t,n):l}function f(e,t,n,r,i){return r===i?r:(e<t&&(e=t),n<e&&(e=n),r+(e-t)/(n-t)*(i-r))}var p=100;function d(e,t,n,r,i,o){if("linear"===t.type){var a="WeathermapLegendGradient-"+n;null!=o&&(a=a+"-"+o);var s=e.linearGradient();i.appendChild(s),s.setAttribute("id",a);for(var u=0,l=t.stops;u<l.length;u++){var c=l[u],f=e.stop();s.appendChild(f),f.setAttribute("offset",c.position+"%"),f.setAttribute("stop-color",""+c[n])}var d=e.rect();r.appendChild(d),v(d,0,0,p,5),d.setAttribute("style","fill:url(#"+a+")")}else if("steps"===t.type){for(var h=1;h<t.stops.length;++h){var m=e.rect();r.appendChild(m),v(m,t.stops[h-1].position,0,t.stops[h].position-t.stops[h-1].position,5),m.setAttribute("style","fill:"+t.stops[h-1][n])}var g=e.rect();r.appendChild(g),v(g,t.stops[t.stops.length-1].position,0,100-t.stops[t.stops.length-1].position,5),g.setAttribute("style","fill:"+t.stops[t.stops.length-1][n])}}function h(e,t,n,r,i,l){void 0===l&&(l=!1);var f=n.gradient.stops.slice().sort((function(e,t){return e.position-t.position})),h={type:n.gradient.type,stops:f},N=new y(e,n,h,r);return function(e,t,n){void 0===n&&(n=!1),e.svg=e.make.svg(),b(e.svg,{width:e.config.canvasSize.width+"px",height:e.config.canvasSize.height+"px"}),n&&e.svg.setAttribute("viewBox","0 0 "+e.config.canvasSize.width+" "+e.config.canvasSize.height),t.appendChild(e.svg),e.defs=e.make.defs(),e.svg.appendChild(e.defs),e.legendGroup=e.make.g(),e.legendGroup.setAttribute("class","legend"),e.svg.appendChild(e.legendGroup),e.edgeGroup=e.make.g(),e.edgeGroup.setAttribute("class","edges"),e.svg.appendChild(e.edgeGroup),e.nodeGroup=e.make.g(),e.nodeGroup.setAttribute("class","nodes"),e.svg.appendChild(e.nodeGroup),e.labelGroup=e.make.g(),e.labelGroup.setAttribute("class","labels"),e.svg.appendChild(e.labelGroup)}(N,t,l),null!=i&&(N.nodeLinkUriBase=i(n.link.node),N.edgeLinkUriBase=i(n.link.edge)),function(e){for(var t=0,n=e.config.weathermapNodes;t<n.length;t++){var r=n[t];e.nodeLabelToNode[r.label]=r;var i=e.make.g();g(e.make,e.nodeGroup,i,e.nodeLinkUriBase,r.linkParams);var o=e.make.rect();i.appendChild(o),v(o,r.x,r.y,r.width,r.height),b(o,{stroke:"gray","stroke-width":"1px"});var a=e.make.text();if(i.appendChild(a),a.setAttribute("x",""+(+r.x+ +e.config.textOffsets.left)),a.setAttribute("y",""+(+r.y+ +r.height-e.config.textOffsets.bottom)),e.config.showNumbers&&null!=r.metricName){var s=r.metricName in e.currentValues?""+e.currentValues[r.metricName]:"?";a.textContent=r.label+" ("+s+")"}else a.textContent=r.label;var u=null;if(r.metricName?r.metricName in e.currentValues?(u=e.currentValues[r.metricName],b(o,{fill:c(e.sortedGradient,"fillColor",u)})):(b(a,{fill:"white"}),b(o,{fill:"black","stroke-dasharray":e.config.noValueDashArray})):b(o,{fill:"silver","stroke-dasharray":e.config.unmeasuredDashArray}),null!==u){var l=e.make.title();i.insertBefore(l,l.firstChild),l.textContent=r.label+" ("+u.toFixed(2)+")"}}}(N),function(e){for(var t=0,n=e.config.weathermapEdges;t<n.length;t++){var r=n[t],i=e.nodeLabelToNode[r.node1],l=e.nodeLabelToNode[r.node2];if(i&&l){var c=e.make.g();g(e.make,e.edgeGroup,c,e.edgeLinkUriBase,r.linkParams);var f={x:+i.x+i.width/2,y:+i.y+i.height/2},p={x:+l.x+l.width/2,y:+l.y+l.height/2},d=null,h=null;if(r.bendDirection&&r.bendMagnitude){var v=Math.atan2(f.y-p.y,p.x-f.x),b=Math.atan2(p.y-f.y,f.x-p.x),y=s(v+u(r.bendDirection)),N=s(b-u(r.bendDirection)),w=a(y,r.bendMagnitude),x=a(N,r.bendMagnitude);d={x:+f.x+w.x,y:f.y-w.y},h={x:+p.x+x.x,y:p.y-x.y}}if(r.metric2Name){var E=o(f,d,h,p),C=E[1],D=E[2],S=E[3],A=E[4],T=E[5];m(e,c,f,C,D,S,r.metricName,r.styleName,r.node1+" → "+r.node2),m(e,c,S,A,T,p,r.metric2Name,r.styleName,r.node2+" → "+r.node1)}else m(e,c,f,d,h,p,r.metricName,r.styleName,r.node1+" ↔ "+r.node2)}}}(N),function(e){for(var t=0,n=e.config.weathermapLabels;t<n.length;t++){var r=n[t],i=e.make.g();e.labelGroup.appendChild(i);var o=e.make.text();i.appendChild(o),o.setAttribute("x",""+ +r.x),o.setAttribute("y",""+ +r.y),o.textContent=r.label}}(N),function(e,t,n,r,i,o){var a="";if(""!==t.type){var s=e.g();n.appendChild(s),s.setAttribute("class","stroke-legend"),"h"===t.type[0]?a="translate("+t.x+" "+t.y+") scale("+t.length/p+" "+t.width/5+")":"v"===t.type[0]&&(a="translate("+t.x+" "+(t.y+t.length)+") rotate(-90) scale("+t.length/p+" "+t.width/5+")"),s.setAttribute("transform",a),d(e,i,"strokeColor",s,r,o);var u=e.g();n.appendChild(u),s.setAttribute("class","fill-legend"),"h"===t.type[0]?a="translate("+t.x+" "+(t.y+t.width)+") scale("+t.length/p+" "+t.width/5+")":"v"===t.type[0]&&(a="translate("+(t.x+t.width)+" "+(t.y+t.length)+") rotate(-90) scale("+t.length/p+" "+t.width/5+")"),u.setAttribute("transform",a),d(e,i,"fillColor",u,r,o),function(e,t,n,r){if(""!==t.type&&"n"!==t.type[1])for(var i=0,o=n.stops;i<o.length;i++){var a=o[i];if(a.showLegendLabel){var s=t.x,u=t.y,l=0,c="start";"h"===t.type[0]?(s+=a.position*t.length/p,c="middle","hb"===t.type&&(u+=2*t.width,l=1)):"v"===t.type[0]&&(u+=t.length-a.position*t.length/p,l=.4,"vl"===t.type?c="end":"vr"===t.type&&(c="start",s+=2*t.width));var f=e.text();r.appendChild(f),f.setAttribute("class","legend-label"),f.setAttribute("x",""+s),f.setAttribute("y",""+u),f.setAttribute("dy",l+"em"),f.setAttribute("style","text-anchor:"+c),f.textContent=""+a.position}}}(e,t,i,n)}}(N.make,n.legend,N.legendGroup,N.defs,h,""+n.id),N.svg}function m(e,t,n,r,i,a,s,u,l){var f=[e.config.strokeWidth],p=function(e,t){return t&&e.styleMap[t]||null}(e,u);p&&p.strokeWidthArray&&(f=p.strokeWidthArray.split(/[ ,]+/).map((function(e){return Number.parseFloat(e)}))),f.length%2!=1&&f.push.apply(f,f);var d,h,m={x:0,y:0};if(1<f.length){var g={x:n.x-a.x,y:n.y-a.y};d={x:g.y,y:-g.x},h=Math.sqrt(d.x*d.x+d.y*d.y),m={x:d.x/h,y:d.y/h}}var v=e.make.g();t.appendChild(v),b(v,{fill:"none"});var y=null;if(null!=s&&s in e.currentValues?(y=e.currentValues[s],b(v,{stroke:c(e.sortedGradient,"strokeColor",y)}),function(e,t){if(t){var n={};t.dashArray&&(n["stroke-dasharray"]=t.dashArray),b(e,n)}}(v,p)):b(v,{stroke:"black","stroke-dasharray":e.config.noValueDashArray}),l){var N=e.make.title();v.appendChild(N),N.textContent=null===y?l:l+" ("+y.toFixed(2)+")"}for(var w=-f.reduce((function(e,t){return e+t}),0)/2,x=!0,E=0,C=f;E<C.length;E++){var D=C[E];if(x=!x)w+=D;else{var S=m.x*(w+D/2),A=m.y*(w+D/2),T=n.x+S,k=n.y+A,I=null==r?null:{x:r.x+S,y:r.y+A},_=null==i?null:{x:i.x+S,y:i.y+A},O=a.x+S,R=a.y+A,M=e.make.path();v.appendChild(M),null==I||null==_?M.setAttribute("d","M "+T+","+k+" L "+O+","+R):M.setAttribute("d","M "+T+","+k+" C "+I.x+","+I.y+","+_.x+","+_.y+","+O+","+R),b(M,{"stroke-width":""+D}),w+=D}}if(e.config.showNumbers){var F=o(n,r,i,a)[3],L=null!=s&&s in e.currentValues?e.currentValues[s].toFixed(2):"?",U=e.make.text();t.appendChild(U),U.setAttribute("x",""+F.x),U.setAttribute("y",""+F.y),U.textContent=L}}function g(e,t,n,r,i){if(null!=r){var o=r;null!=i&&(o+=-1===o.indexOf("?")?"?":"&",o+=i);var a=e.a();t.appendChild(a),a.setAttributeNS("http://www.w3.org/1999/xlink","href",o),a.appendChild(n)}else t.appendChild(n)}function v(e,t,n,r,i){e.setAttribute("x",""+t),e.setAttribute("y",""+n),e.setAttribute("width",""+r),e.setAttribute("height",""+i)}function b(e,t){var n={};if(e.hasAttribute("style")){var r=e.getAttribute("style");if(null!=r)for(var i=0,o=r.split(";");i<o.length;i++){var a=o[i],s=a.indexOf(":");if(-1!==s){var u=a.substr(0,s),l=a.substr(s+1);n[u]=l}}}for(var u in t)t.hasOwnProperty(u)&&(null===t[u]?delete n[u]:n[u]=t[u]);var c=[];for(var u in n)n.hasOwnProperty(u)&&c.push(u+":"+n[u]);var f=c.join(";");e.setAttribute("style",f)}var y=function(e,t,n,r){if(this.make=new N(e),this.config=t,this.sortedGradient=n,this.currentValues=r,this.nodeLabelToNode={},this.nodeLinkUriBase=null,this.edgeLinkUriBase=null,this.svg=null,this.defs=null,this.edgeGroup=null,this.nodeGroup=null,this.labelGroup=null,this.legendGroup=null,this.styleMap={},t.weathermapStyles)for(var i=0,o=t.weathermapStyles;i<o.length;i++){var a=o[i];this.styleMap[a.name]=a}},N=(w.prototype.a=function(){return this.maker.createElementNS(r,"a")},w.prototype.defs=function(){return this.maker.createElementNS(r,"defs")},w.prototype.g=function(){return this.maker.createElementNS(r,"g")},w.prototype.linearGradient=function(){return this.maker.createElementNS(r,"linearGradient")},w.prototype.path=function(){return this.maker.createElementNS(r,"path")},w.prototype.rect=function(){return this.maker.createElementNS(r,"rect")},w.prototype.stop=function(){return this.maker.createElementNS(r,"stop")},w.prototype.svg=function(){return this.maker.createElementNS(r,"svg")},w.prototype.text=function(){return this.maker.createElementNS(r,"text")},w.prototype.title=function(){return this.maker.createElementNS(r,"title")},w);function w(e){this.maker=e}var x=n(0),E=n(1);function C(e,t,n){return function(e,t,n,r){return new(n=n||Promise)((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function(){var r,i,o,a,s,u,l,c,f,p,d,h,m,g,v,b,y;return function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=0<(i=a.trys).length&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,(function(N){switch(N.label){case 0:r=new E.Agent,i={},o=0,a=t,N.label=1;case 1:return o<a.length?(s=a[o],u=encodeURIComponent(s.expr.replace("$lookback_interval",n).replace("$__range",n)),l=new URL("api/v1/query?query="+u,e),[4,(w=l.protocol,x=l.hostname,C=+l.port,S=l.pathname+l.search,A=r,new Promise((function(e,t){var n={protocol:w,hostname:x,port:C,path:S,agent:A},r=E.request(n,(function(t){var n="";t.on("data",(function(e){n+=e})),t.on("end",(function(){e([t,n])}))}));r.on("error",(function(e){t(e)})),r.end()})))]):[3,4];case 2:for(c=N.sent(),f=c[0],p=c[1],d=JSON.parse(p),h=0,m=d.data.result;h<m.length;h++)g=m[h],v=g.metric,b=+g.value[1],y=D(s.legendFormat,v),i[y]=b;f.destroy(),N.label=3;case 3:return o++,[3,1];case 4:return r.destroy(),[2,i]}var w,x,C,S,A}))}))}function D(e,t){for(var n=e;;){var r=n.indexOf("{{");if(-1===r)return n;var i=n.indexOf("}}",r);if(-1===i)return n;var o=n.substr(r+2,i-r-2),a=o in t?t[o]:"";n=n.substr(0,r)+a+n.substr(i+2)}}var S=n(2),A={configFile:"genwmap.json",outputFile:"weathermap.svg"};function T(){console.error("Usage: genwmap [-c CONFIG.json] [-o OUTPUT.svg]")}function k(){return function(e,t,n,r){return new(n=n||Promise)((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function(){var e,t,n,i,o,a,s,u,l,c,f,p,d,m;return function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=0<(i=a.trys).length&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,(function(g){switch(g.label){case 0:return function(){for(var e=null,t=2;t<process.argv.length;++t){var n=process.argv[t];if(null===e){if("-c"!==n&&"-o"!==n)return console.error("Unknown option '"+n+"'"),void T();e=n}else"-c"===e?A.configFile=n:"-o"===e&&(A.outputFile=n),e=null}return null===e||(console.error("No value specified for option '"+e+"'"),void T())}()?[4,(N=A.configFile,new Promise((function(e,t){S.readFile(N,{encoding:"utf8"},(function(n,r){n?t(n):e(r)}))})))]:(process.exitCode=1,[2]);case 1:return e=g.sent(),t=JSON.parse(e),n=t.weathermap,i=t.weathermap.targets,o=t.dataSources,a=t.lookbackInterval,s=t.styleDefinition,[4,C(new URL(o[t.weathermap.datasource]),i,a)];case 2:return u=g.sent(),l=new x.DOMImplementation,c=l.createDocument(null,null,null),f=h(c,c,n,u,null,!0),s&&(p=c.createElementNS(r,"style"),f.insertBefore(p,f.firstElementChild),p.setAttribute("type","text/css"),p.textContent=s),d=new x.XMLSerializer,m=d.serializeToString(c),[4,(v=A.outputFile,b=m,y={},new Promise((function(e,t){S.writeFile(v,b,y,(function(n){n?t(n):e()}))})))];case 3:return g.sent(),[2]}var v,b,y,N}))}))}}]);
//# sourceMappingURL=genwmap.js.map